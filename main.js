!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e){if(!e.hasOwnProperty("segmentType"))return{name:"LTS",because:"segmentType"};var t,n;switch(e.segmentType){case"stand-alone":case"segregated":n=1;break;case"bike lane":n=function(e){var t,n,r,a;if(!("lanesAdjacent"in e))return"lanesAdjacent";if(e.lanesAdjacent){if(!("laneCount"in e))return"laneCount";if(t=e.laneCount<2?1:3,!("lanesCombinedWidth"in e))return"lanesCombinedWidth";if(n=e.lanesCombinedWidth>=15?1:e.lanesCombinedWidth>13.5?2:3,!("speed"in e))return"speed";r=e.speed<=25?1:e.speed<35?2:e.speed<40?3:4}else{if(!("laneCount"in e))return"laneCount";if(1==e.laneCount)t=1;else if(2==e.laneCount){if(!("median"in e))return"median";t=e.median?2:3}else t=3;if(!("laneWidth"in e))return"laneWidth";if(n=e.laneWidth>=6?1:2,!("speed"in e))return"speed";r=e.speed<=30?1:e.speed<40?3:4}if(!("blockage"in e))return"blockage";switch(e.blockage){case"rarely":a=1;break;case"frequently":a=3;break;default:throw Error("invalid blockage, must be 'rarely' or 'frequently'")}return Math.max(t,n,r,a)}(e);break;case"mixed traffic":n=function(e){var t;if(!("totalLanes"in e))return"totalLanes";if(e.totalLanes>=6)t=4;else if(e.totalLanes>3){if(!("speed"in e))return"speed";t=e.speed>=30?4:3}else{if(!("speed"in e))return"speed";if(e.speed>=35)t=4;else{if(30==e.speed?t=3:e.speed<=25&&(t=2),!("centerline"in e&&"adt"in e))return"centerline or adt";!e.centerline&&e.adt<=3e3&&(t-=1)}}return t}(e);break;default:throw Error("improper segment type: "+e.segmentType)}if("number"==typeof n&&isNaN(n))return{name:"LTS",because:""};if("string"==typeof n)return{name:"LTS",because:n};if(e.unsignalized){var r=function(e){if(!("island"in e))return"island";if(!("xStreetWidth"in e))return"xStreetWidth";if(!("speed"in e))return"speed";return e.island?e.xStreetWidth>=6?4:e.xStreetWidth>3?e.speed>=40?4:e.speed>=35?3:2:e.speed>=40?3:e.speed>=35?2:1:e.xStreetWidth>=6?e.speed>=35?4:e.speed>=30?3:2:e.xStreetWidth>3?e.speed>=40?4:e.speed>=35?3:e.speed>=30?2:1:e.speed>=40?3:e.speed>=35?2:1}(e);if("string"==typeof r)return{name:"LTS",because:r};n=Math.max(n,r)}if(e.RLCount>0){var a=function(e){if(!("RLCount"in e))return"RLCount";if(!("laneShift"in e))return"laneShift";if(!("turningSpeed"in e))return"turningSpeed";if(!("RLLength"in e))return"RLLength";if(e.RLCount>1)return 4;if(e.laneShift&&e.turningSpeed<=15)return 3;if(!e.laneShift){if(e.turningSpeed<=15&&e.RLLength<=150)return 2;if(e.turningSpeed<=20)return 3}return 4}(e);if("string"==typeof a)return{name:"LTS",because:a};n=Math.max(n,a)}switch(n){case 1:t="A";break;case 2:t="B";break;case 3:t="D";break;case 4:t="F";break;default:throw Error("points is invalid: "+n)}return{grade:t,points:n,name:"LTS"}}n.r(t);firebase.initializeApp({apiKey:"AIzaSyChkACWp5aGd0s3ovbD7sRMugbSaljjyZU",authDomain:"bicycleboys.firebaseapp.com",databaseURL:"https://bicycleboys.firebaseio.com",projectId:"bicycleboys",storageBucket:"bicycleboys.appspot.com",messagingSenderId:"691023297022",appId:"1:691023297022:web:91ea734781e0029e99a8af",measurementId:"G-ZRQ1KHK7PL"});firebase.database();function a(){if(form.reportValidity()){var e=function(e){if(null==e)throw Error("Invalid form passed in");let t={},n=e.querySelectorAll("input, select, textarea");for(let e of n){var r=e.name,a=e.value;"false"==a&&(a=!1),"true"==a&&(a=!0),r&&(t[r]=a)}return t.lanesCombinedWidth=t.adjacent?t.width:NaN,t.laneWidth=t.adjacent?NaN:t.width,t}(form),t=r(e),n=function(e){var t,n,r,a,i,o,u,d=e.ppk/100;u=e.fb?5.37:1,o=e.adt/20,t=e.curb?Math.max(0,e.wos-1.5):e.wos,n=0==d?e.wol+e.wbl+t:e.wol+e.wbl,r=e.devided||o>160?n:n*(2-.005*o),a=d<.25||e.parkingStriped?e.wbl+t:10;var s=6-.3*e.waa;return i=(i=6.0468+-1.2276*Math.log(r+.5*a+50*d+e.wbuf*u+e.waa*s)+.0091*o/(4*e.laneCount)+4*Math.pow(e.runningSpeed/100,2)).toFixed(2),{points:i=parseFloat(i),grade:i<=2?"A":i<=2.75?"B":i<=3.5?"C":i<=4.25?"D":i<=5?"E":"F",name:"PLOS"}}(e),a=function(e){if(!function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach((function(t){if(!(t in e))return!1})),!0}(e,"adt","ppk","curb","wos","wol","devided","wbl","wos","runningSpeed","laneCount","phv","pc"))return{name:"BLOS",because:""};var t,n,r,a,i,o,u,d,s,l=e.ppk/100;return s=e.adt/20,t=e.curb?Math.max(0,e.wos-1.5):e.wos,n=0==l?e.wol+e.wbl+t:e.wol+e.wbl,r=e.devided||s>160?n:n*(2-.005*s),a=e.wbl+e.wos<4?Math.max(r-10*l,0):Math.max(r+e.wbl+e.wos-20*l,0),i=s*(1-.001*e.phv)<200&&e.phv>50?50:e.phv,o=Math.max(21,e.runningSpeed),u=Math.max(s,4*e.laneCount),d=(.76+-.005*Math.pow(a,2)+.507*Math.log(u/(4*e.laneCount))+.199*(1.1199*Math.log(o-20)+.8103)*Math.pow(1+.1038*i,2)+7.066/Math.pow(e.pc,2)).toFixed(2),{points:d=parseFloat(d),grade:d<=2?"A":d<=2.75?"B":d<=3.5?"C":d<=4.25?"D":d<=5?"E":"F",name:"BLOS"}}(e);i(t),i(a),i(n)}}function i(e){var t=document.createElement("p");if(!e.grade)throw Error("Cannot display "+e.name+" without a grade");t.textContent=`${e.name}: ${e.grade} (${e.points})`,document.body.appendChild(t)}function o(){form.reset(),type.selectedIndex=-1,blockage.selectedIndex=-1}document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("type"),t=(document.getElementById("blockage"),document.getElementById("submit")),n=(document.getElementById("form"),!1);o(),e.addEventListener("input",(function(t){if(n)switch(n){case"bike lane":document.querySelectorAll(".if-bike-lane").forEach((function(e){e.removeAttribute("required")}));break;case"mixed traffic":document.querySelectorAll(".if-mixed").forEach((function(e){e.removeAttribute("required")}))}switch(n=e.value,e.value){case"stand-alone":case"segregated":break;case"bike lane":document.querySelectorAll(".if-bike-lane").forEach((function(e){e.setAttribute("required","")}));break;case"mixed traffic":document.querySelectorAll(".if-mixed").forEach((function(e){e.setAttribute("required","")}))}})),t.onclick=e=>{a()}}))}]);