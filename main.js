!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";function n(e){if(!e.hasOwnProperty("segmentType"))return{name:"LTS"};var t,r;switch(e.segmentType){case"stand-alone":case"segregated":r=1;break;case"bike lane":r=function(e){var t,r,n,a;e.lanesAdjacent?(t=e.laneCount<2?1:3,r=e.lanesCombinedWidth>=15?1:e.lanesCombinedWidth>13.5?2:3,n=e.speed<=25?1:e.speed<35?2:e.speed<40?3:4):(t=1==e.laneCount?1:2==e.laneCount&&e.median?2:3,r=e.laneWidth>=6?1:2,n=e.speed<=30?1:e.speed<40?3:4);switch(e.blockage){case"rarely":a=1;break;case"frequently":a=3;break;default:throw Error("invalid blockage, must be 'rarely' or 'frequently'")}return Math.max(t,r,n,a)}(e);break;case"mixed traffic":r=function(e){var t;e.totalLanes>=6?t=4:e.totalLanes>3?t=e.speed>=30?4:3:e.speed>=35?t=4:(30==e.speed?t=3:e.speed<=25&&(t=2),!e.centerlines&&e.adt<=3e3&&(t-=1));return t}(e);break;default:throw Error("improper segment type")}switch(r){case 1:t="A";break;case 2:t="B";break;case 3:t="D";break;case 4:t="F";break;default:throw Error("points is invalid: "+r)}return{grade:t,points:r,name:"LTS"}}function a(){if(form.reportValidity()){var e=function(e){if(null==e)throw Error("Invalid form passed in");let t={},r=e.querySelectorAll("input, select, textarea");for(let e of r){var n=e.name,a=e.value;n&&(t[n]=a)}return t.lanesCombinedWidth=t.adjacent?t.width:NaN,t.laneWidth=t.adjacent?NaN:t.width,t}(form);i();var t=n(e),r=function(e){var t,r,n,a,o,i,l;l=e.fb?5.37:1,i=e.adt/20,t=e.curb?Math.max(0,e.wos-1.5):e.wos,r=0==e.ppk?e.wol+e.wbl+t:e.wol+e.wbl,n=e.devided||i>160?r:r*(2-.005*i),a=e.ppk<.25||e.parkingStriped?e.wbl+t:10;var d=6-.3*e.waa;return o=(o=6.0468+-1.2276*Math.log(n+.5*a+50*e.ppk+e.wbuf*l+e.waa*d)+.0091*i/(4*e.laneCount)+4*Math.pow(e.sr/100,2)).toFixed(2),{points:o=parseFloat(o),grade:o<=2?"A":o<=2.75?"B":o<=3.5?"C":o<=4.25?"D":o<=5?"E":"F",name:"PLOS"}}(e),a=(h=(l=e).adt/20,d=l.curb?Math.max(0,l.wos-1.5):l.wos,u=0==l.ppk?l.wol+l.wbl+d:l.wol+l.wbl,c=l.devided||h>160?u:u*(2-.005*h),s=l.wbl+l.wos<4?Math.max(c-10*l.ppk,0):Math.max(c+l.wbl+l.wos-20*l.ppk,0),f=h*(1-.001*l.phv)<200&&l.phv>50?50:l.phv,p=Math.max(21,l.sr),m=Math.max(h,4*l.laneCount),b=(.76+-.005*Math.pow(s,2)+.507*Math.log(m/(4*l.laneCount))+.199*(1.1199*Math.log(p-20)+.8103)*Math.pow(1+.1038*f,2)+7.066/Math.pow(l.pc,2)).toFixed(2),{points:b=parseFloat(b),grade:b<=2?"A":b<=2.75?"B":b<=3.5?"C":b<=4.25?"D":b<=5?"E":"F",name:"BLOS"});o(t),o(a),o(r)}var l,d,u,c,s,f,p,m,b,h}function o(e){var t=document.createElement("p");if(!e.grade)throw Error("Cannot display "+e.name+" without a grade");t.textContent=`${e.name}: ${e.grade} (${e.points})`,document.body.appendChild(t)}function i(){form.reset(),type.selectedIndex=-1,blockage.selectedIndex=-1}r.r(t),document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("type"),t=(document.getElementById("blockage"),document.getElementById("submit")),r=(document.getElementById("form"),!1);i(),e.addEventListener("input",(function(t){if(r)switch(r){case"bike lane":document.querySelectorAll(".if-bike-lane").forEach((function(e){e.removeAttribute("required")}));break;case"mixed traffic":document.querySelectorAll(".if-mixed").forEach((function(e){e.removeAttribute("required")}))}switch(r=e.value,e.value){case"stand-alone":case"segregated":break;case"bike lane":document.querySelectorAll(".if-bike-lane").forEach((function(e){e.setAttribute("required","")}));break;case"mixed traffic":document.querySelectorAll(".if-mixed").forEach((function(e){e.setAttribute("required","")}))}})),t.addEventListener("click",e=>{a()})}))}]);